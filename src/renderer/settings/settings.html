<!DOCTYPE html>
<!--
  This Source Code Form is subject to the terms of the Mozilla Public
  License, v. 2.0. If a copy of the MPL was not distributed with this
  file, You can obtain one at https://mozilla.org/MPL/2.0/.

  Copyright (c) 2025 Stephen Le
-->

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self';">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings - Compose Booster</title>
</head>
<body>
  <div class="settings-container">
    <nav class="settings-sidebar">
      <header class="settings-header">
        <h1>Settings</h1>
      </header>
      <div class="settings-tabs">
        <button class="tab-btn active" data-tab="general">General</button>
        <button class="tab-btn" data-tab="models">Models</button>
        <button class="tab-btn" data-tab="prompts">Prompts</button>
        <button class="tab-btn" data-tab="tones">Tones</button>
        <button class="tab-btn" data-tab="styles">Styles</button>
        <button class="tab-btn" data-tab="hotcombos">Quick Actions</button>
        <button class="tab-btn" data-tab="advanced">Advanced</button>
        <button class="tab-btn" data-tab="about">About</button>
      </div>
    </nav>

    <main class="settings-content">
      <!-- General Tab -->
      <div class="tab-content active" id="general-tab">
      <section class="settings-section">
        <h2>API Configuration</h2>

        <div class="form-group">
          <label for="apiKey">OpenRouter API Key</label>
          <div class="api-key-group">
            <input
              type="password"
              id="apiKey"
              class="form-control"
              placeholder="sk-or-v1-..."
            >
            <button id="testApiKeyBtn" class="btn btn-secondary">Test Key</button>
          </div>
          <small class="form-text">
            Get your API key from <a href="#" id="openRouterLink">OpenRouter Dashboard</a>
          </small>
          <div id="apiKeyStatus" class="status-message hidden"></div>
        </div>
      </section>

      <section class="settings-section">
        <h2>Appearance</h2>

        <div class="form-group">
          <label for="themeSelect">Theme</label>
          <select id="themeSelect" class="form-control">
            <option value="light">Light</option>
            <option value="dark">Dark</option>
            <option value="system">System</option>
          </select>
        </div>

        <div class="form-group">
          <label for="fontSize">Font Size: <span id="fontSizeValue">14</span>px</label>
          <input
            type="range"
            id="fontSize"
            class="form-control-range"
            min="10"
            max="20"
            value="14"
          >
        </div>
      </section>

      <section class="settings-section">
        <h2>Preferences</h2>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="saveWindowPosition">
            Save window position and size
          </label>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="clearHistoryOnExit">
            Clear history on exit
          </label>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="includeClosingAndSignature">
            Include closing salutation and signature in AI response
          </label>
          <small class="form-help">When disabled (default), the AI will only rewrite the email body, allowing you to keep your existing signature.</small>
        </div>

        <div class="form-group">
          <label for="outputFormat">Output Format (for clipboard)</label>
          <select id="outputFormat" class="form-control">
            <option value="plain">Plain Text</option>
            <option value="markdown">Markdown (as-is)</option>
            <option value="html">HTML (convert Markdown to HTML)</option>
          </select>
          <small class="form-help">Choose how AI output is copied to clipboard. "Plain Text" strips all formatting. "HTML" converts Markdown to formatted HTML for rich-text email clients like Outlook.</small>
        </div>
      </section>
      </div>

      <!-- Models Tab -->
      <div class="tab-content" id="models-tab">
        <section class="settings-section">
          <h2>AI Models</h2>
          <p class="section-description">Manage available AI models. Enable or disable models, or add custom models.</p>

          <div id="modelsTableContainer"></div>
        </section>
      </div>

      <!-- Prompts Tab -->
      <div class="tab-content" id="prompts-tab">
        <section class="settings-section">
          <h2>Prompt Templates</h2>
          <p class="section-description">Customize prompt templates. Default prompts cannot be deleted but can be edited.</p>

          <div id="promptsListContainer"></div>
        </section>
      </div>

      <!-- Tones Tab -->
      <div class="tab-content" id="tones-tab">
        <section class="settings-section">
          <h2>Tone Options</h2>
          <p class="section-description">Manage tone descriptions. Default tones cannot be deleted but can be edited.</p>

          <div id="tonesListContainer"></div>
        </section>
      </div>

      <!-- Styles Tab -->
      <div class="tab-content" id="styles-tab">
        <section class="settings-section">
          <h2>Writing Style Profiles</h2>
          <p class="section-description">Create custom writing styles to personalize AI responses. Add examples to help the AI learn your preferred writing patterns.</p>

          <div id="stylesListContainer"></div>
        </section>
      </div>

      <!-- Quick Actions Tab -->
      <div class="tab-content" id="hotcombos-tab">
        <section class="settings-section">
          <h2>Quick Action Configuration</h2>
          <p class="section-description">Configure your quick action buttons (Ctrl/Cmd + 1/2/3).</p>

          <div id="quickActionsContainer"></div>
        </section>
      </div>

      <!-- Advanced Tab -->
      <div class="tab-content" id="advanced-tab">
        <section class="settings-section">
          <h2>Advanced Settings</h2>

          <div id="advancedSettingsContainer"></div>
        </section>
      </div>

      <!-- About Tab -->
      <div class="tab-content" id="about-tab">
        <div id="aboutContainer"></div>
      </div>

      <footer class="settings-footer">
        <button id="cancelBtn" class="btn btn-secondary">Cancel</button>
        <button id="saveBtn" class="btn btn-primary">Save Settings</button>
      </footer>
    </main>
  </div>

  <script type="module" src="./settingsRenderer.ts"></script>
</body>
</html>
