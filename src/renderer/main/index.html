<!DOCTYPE html>
<!--
  This Source Code Form is subject to the terms of the Mozilla Public
  License, v. 2.0. If a copy of the MPL was not distributed with this
  file, You can obtain one at https://mozilla.org/MPL/2.0/.

  Copyright (c) 2025 Stephen Le
-->

<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- CSP disabled for development - re-enable for production -->
  <!-- <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self';"> -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Compose Booster</title>
</head>
<body>
  <div id="app" class="app-container">

    <!-- Main Content Area -->
    <div class="main-content">

      <!-- Input Section -->
      <div class="input-section">
        <div class="section-header">
          <h2>Email Draft</h2>
          <div class="actions">
            <button id="pasteBtn" class="btn btn-secondary" title="Ctrl/Cmd+Shift+V">
              ğŸ“‹ Paste
            </button>
            <button id="clearInputBtn" class="btn btn-secondary" title="Ctrl/Cmd+K">
              ğŸ—‘ï¸ Clear
            </button>
          </div>
        </div>
        <textarea
          id="inputText"
          placeholder="Paste your email draft and conversation chain here..."
          class="email-textarea"
        ></textarea>
        <div class="char-counter">
          <span id="charCount">0</span> characters
        </div>
      </div>

      <!-- Output Section -->
      <div class="output-section">
        <div class="section-header">
          <h2>AI Response</h2>
          <div class="actions">
            <button id="regenerateBtn" class="btn btn-secondary btn-regenerate hidden" title="Generate a different response">
              ğŸ‘ Try Again
            </button>
            <button id="copyBtn" class="btn btn-primary" title="Ctrl/Cmd+Shift+C">
              ğŸ“„ Copy
            </button>
            <button id="clearOutputBtn" class="btn btn-secondary" title="Ctrl/Cmd+Shift+K">
              ğŸ—‘ï¸ Clear
            </button>
          </div>
        </div>
        <textarea
          id="outputText"
          placeholder="AI response will appear here..."
          class="email-textarea"
          readonly
        ></textarea>
        <div class="output-footer">
          <div id="copyConfirmation" class="copy-confirmation hidden">âœ“ Copied!</div>
          <div id="versionNavigator" class="version-navigator hidden">
            <button id="prevVersionBtn" class="btn-version-nav" title="Previous version" disabled>â—€</button>
            <span id="versionIndicator" class="version-indicator">1 of 1</span>
            <button id="nextVersionBtn" class="btn-version-nav" title="Next version" disabled>â–¶</button>
          </div>
        </div>
      </div>

    </div>

    <!-- Control Panel -->
    <div class="control-panel">

      <!-- Quick Actions -->
      <div class="quick-actions-section">
        <h3>Quick Actions</h3>
        <div class="quick-action-buttons">
          <button id="quickAction1" class="btn btn-quick-action" title="Ctrl/Cmd+1">
            <span class="quick-action-icon">âš¡</span>
            <span class="quick-action-label">Quick Polish</span>
          </button>
          <button id="quickAction2" class="btn btn-quick-action" title="Ctrl/Cmd+2">
            <span class="quick-action-icon">ğŸ¯</span>
            <span class="quick-action-label">Professional</span>
          </button>
          <button id="quickAction3" class="btn btn-quick-action" title="Ctrl/Cmd+3">
            <span class="quick-action-icon">âœ¨</span>
            <span class="quick-action-label">Friendly</span>
          </button>
        </div>
      </div>

      <!-- Custom Combo -->
      <div class="custom-combo-section">
        <h3>Custom Processing</h3>
        <div class="custom-combo-controls">
          <select id="modelSelect" class="combo-select">
            <option value="">Loading models...</option>
          </select>
          <select id="promptSelect" class="combo-select">
            <option value="">Loading prompts...</option>
          </select>
          <select id="toneSelect" class="combo-select">
            <option value="">Loading tones...</option>
          </select>
          <button id="processBtn" class="btn btn-primary btn-process" title="Ctrl/Cmd+Enter">
            â–¶ Process
          </button>
        </div>
      </div>

    </div>

    <!-- Status Bar -->
    <div id="statusBar" class="status-bar status-ready">
      <div class="status-message">Ready</div>
      <div class="status-details">
        <span id="statusCost" class="status-cost hidden"></span>
        <span id="statusTime" class="status-time hidden"></span>
        <span id="statusModel" class="status-model hidden"></span>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
      <div class="loading-content">
        <div class="spinner"></div>
        <div class="loading-message">Processing your email...</div>
        <button id="cancelBtn" class="btn btn-secondary">Cancel (ESC)</button>
      </div>
    </div>

  </div>

  <script type="module" src="./renderer.ts"></script>
</body>
</html>
